<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_22) on Tue Dec 18 19:42:35 EST 2012 -->
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<TITLE>
TaxonomyReader (Lucene 3.6.2 API)
</TITLE>

<META NAME="keywords" CONTENT="org.apache.lucene.facet.taxonomy.TaxonomyReader interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="TaxonomyReader (Lucene 3.6.2 API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TaxonomyReader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/lucene/facet/taxonomy/TaxonomyReader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TaxonomyReader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.lucene.facet.taxonomy</FONT>
<BR>
Interface TaxonomyReader</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html" title="class or interface in java.io">Closeable</A></DD>
</DL>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../../../org/apache/lucene/facet/taxonomy/directory/DirectoryTaxonomyReader.html" title="class in org.apache.lucene.facet.taxonomy.directory">DirectoryTaxonomyReader</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>TaxonomyReader</B><DT>extends <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html" title="class or interface in java.io">Closeable</A></DL>
</PRE>

<P>
TaxonomyReader is the read-only interface with which the faceted-search
 library uses the taxonomy during search time.
 <P>
 A TaxonomyReader holds a list of categories. Each category has a serial
 number which we call an "ordinal", and a hierarchical "path" name:
 <UL>
 <LI>
 The ordinal is an integer that starts at 0 for the first category (which is
 always the root category), and grows contiguously as more categories are
 added; Note that once a category is added, it can never be deleted.
 <LI>
 The path is a CategoryPath object specifying the category's position in the
 hierarchy.
 </UL>
 <B>Notes about concurrent access to the taxonomy:</B>
 <P>
 An implementation must allow multiple readers to be active concurrently
 with a single writer. Readers follow so-called "point in time" semantics,
 i.e., a TaxonomyReader object will only see taxonomy entries which were
 available at the time it was created. What the writer writes is only
 available to (new) readers after the writer's commit() is called.
 <P>
 In faceted search, two separate indices are used: the main Lucene index,
 and the taxonomy. Because the main index refers to the categories listed
 in the taxonomy, it is important to open the taxonomy *after* opening the
 main index, and it is also necessary to reopen() the taxonomy after
 reopen()ing the main index.
 <P>
 This order is important, otherwise it would be possible for the main index
 to refer to a category which is not yet visible in the old snapshot of
 the taxonomy. Note that it is indeed fine for the the taxonomy to be opened
 after the main index - even a long time after. The reason is that once
 a category is added to the taxonomy, it can never be changed or deleted,
 so there is no danger that a "too new" taxonomy not being consistent with
 an older index.
<P>

<P>
<DL>
<DT><B>WARNING: This API is experimental and might change in incompatible ways in the next release.</B></DT>
  <DD></DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;interface</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy">TaxonomyReader.ChildrenArrays</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Equivalent representations of the taxonomy's parent info, 
 used internally for efficient computation of facet results: 
 "youngest child" and "oldest sibling"</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#INVALID_ORDINAL">INVALID_ORDINAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ordinals are always non-negative, so a negative ordinal can be used to
 signify an error.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#ROOT_ORDINAL">ROOT_ORDINAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The root category (the category with the empty path) always has the
 ordinal 0, to which we give a name ROOT_ORDINAL.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#decRef()">decRef</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expert: decreases the refCount of this TaxonomyReader instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy">TaxonomyReader.ChildrenArrays</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getChildrenArrays()">getChildrenArrays</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getChildrenArrays() returns a <A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><CODE>TaxonomyReader.ChildrenArrays</CODE></A> object which can
 be used together to efficiently enumerate the children of any category.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html" title="class or interface in java.util">Map</A>&lt;<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>,<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getCommitUserData()">getCommitUserData</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Retrieve user committed data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getOrdinal(org.apache.lucene.facet.taxonomy.CategoryPath)">getOrdinal</A></B>(<A HREF="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</A>&nbsp;categoryPath)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getOrdinal() returns the ordinal of the category given as a path.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getParent(int)">getParent</A></B>(int&nbsp;ordinal)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getParent() returns the ordinal of the parent category of the category
 with the given ordinal.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getParentArray()">getParentArray</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getParentArray() returns an int array of size getSize() listing the
 ordinal of the parent category of each category in the taxonomy.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getPath(int)">getPath</A></B>(int&nbsp;ordinal)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPath() returns the path name of the category with the given
 ordinal.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getPath(int, org.apache.lucene.facet.taxonomy.CategoryPath)">getPath</A></B>(int&nbsp;ordinal,
        <A HREF="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</A>&nbsp;result)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPath() returns the path name of the category with the given
 ordinal.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getRefCount()">getRefCount</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expert: returns the current refCount for this taxonomy reader</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getSize()">getSize</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getSize() returns the number of categories in the taxonomy.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#incRef()">incRef</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expert: increments the refCount of this TaxonomyReader instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#refresh()">refresh</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refresh() re-reads the taxonomy information if there were any changes to
 the taxonomy since this instance was opened or last refreshed.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.io.Closeable"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface java.io.<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html" title="class or interface in java.io">Closeable</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html#close()" title="class or interface in java.io">close</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ROOT_ORDINAL"><!-- --></A><H3>
ROOT_ORDINAL</H3>
<PRE>
static final int <B>ROOT_ORDINAL</B></PRE>
<DL>
<DD>The root category (the category with the empty path) always has the
 ordinal 0, to which we give a name ROOT_ORDINAL.
 getOrdinal() of an empty path will always return ROOT_ORDINAL, and
 getCategory(ROOT_ORDINAL) will return the empty path.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.lucene.facet.taxonomy.TaxonomyReader.ROOT_ORDINAL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="INVALID_ORDINAL"><!-- --></A><H3>
INVALID_ORDINAL</H3>
<PRE>
static final int <B>INVALID_ORDINAL</B></PRE>
<DL>
<DD>Ordinals are always non-negative, so a negative ordinal can be used to
 signify an error. Methods here return INVALID_ORDINAL (-1) in this case.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../constant-values.html#org.apache.lucene.facet.taxonomy.TaxonomyReader.INVALID_ORDINAL">Constant Field Values</A></DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getOrdinal(org.apache.lucene.facet.taxonomy.CategoryPath)"><!-- --></A><H3>
getOrdinal</H3>
<PRE>
int <B>getOrdinal</B>(<A HREF="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</A>&nbsp;categoryPath)
               throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>getOrdinal() returns the ordinal of the category given as a path.
 The ordinal is the category's serial number, an integer which starts
 with 0 and grows as more categories are added (note that once a category
 is added, it can never be deleted).
 <P>
 If the given category wasn't found in the taxonomy, INVALID_ORDINAL is
 returned.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPath(int)"><!-- --></A><H3>
getPath</H3>
<PRE>
<A HREF="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</A> <B>getPath</B>(int&nbsp;ordinal)
                     throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>getPath() returns the path name of the category with the given
 ordinal. The path is returned as a new CategoryPath object - to
 reuse an existing object, use <A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html#getPath(int, org.apache.lucene.facet.taxonomy.CategoryPath)"><CODE>getPath(int, CategoryPath)</CODE></A>.
 <P>
 A null is returned if a category with the given ordinal does not exist.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getPath(int, org.apache.lucene.facet.taxonomy.CategoryPath)"><!-- --></A><H3>
getPath</H3>
<PRE>
boolean <B>getPath</B>(int&nbsp;ordinal,
                <A HREF="../../../../../org/apache/lucene/facet/taxonomy/CategoryPath.html" title="class in org.apache.lucene.facet.taxonomy">CategoryPath</A>&nbsp;result)
                throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>getPath() returns the path name of the category with the given
 ordinal. The path is written to the given CategoryPath object (which
 is cleared first).
 <P>
 If a category with the given ordinal does not exist, the given
 CategoryPath object is not modified, and the method returns
 <code>false</code>. Otherwise, the method returns <code>true</code>.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="refresh()"><!-- --></A><H3>
refresh</H3>
<PRE>
boolean <B>refresh</B>()
                throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A>,
                       <A HREF="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy">InconsistentTaxonomyException</A></PRE>
<DL>
<DD>refresh() re-reads the taxonomy information if there were any changes to
 the taxonomy since this instance was opened or last refreshed. Calling
 refresh() is more efficient than close()ing the old instance and opening a
 new one.
 <P>
 If there were no changes since this instance was opened or last refreshed,
 then this call does nothing. Note, however, that this is still a relatively
 slow method (as it needs to verify whether there have been any changes on
 disk to the taxonomy), so it should not be called too often needlessly. In
 faceted search, the taxonomy reader's refresh() should be called only after
 a reopen() of the main index.
 <P>
 Refreshing the taxonomy might fail in some cases, for example 
 if the taxonomy was recreated since this instance was opened or last refreshed.
 In this case an <A HREF="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy"><CODE>InconsistentTaxonomyException</CODE></A> is thrown,
 suggesting that in order to obtain up-to-date taxonomy data a new
 <A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="interface in org.apache.lucene.facet.taxonomy"><CODE>TaxonomyReader</CODE></A> should be opened. Note: This <A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.html" title="interface in org.apache.lucene.facet.taxonomy"><CODE>TaxonomyReader</CODE></A> 
 instance remains unchanged and usable in this case, and the application can
 continue to use it, and should still <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/Closeable.html#close()" title="class or interface in java.io"><CODE>Closeable.close()</CODE></A> when no longer needed.  
 <P>
 It should be noted that refresh() is similar in purpose to
 IndexReader.reopen(), but the two methods behave differently. refresh()
 refreshes the existing TaxonomyReader object, rather than opening a new one
 in addition to the old one as reopen() does. The reason is that in a
 taxonomy, one can only add new categories and cannot modify or delete
 existing categories; Therefore, there is no reason to keep an old snapshot
 of the taxonomy open - refreshing the taxonomy to the newest data and using
 this new snapshots in all threads (whether new or old) is fine. This saves
 us needing to keep multiple copies of the taxonomy open in memory.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true if anything has changed, false otherwise.
<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE>
<DD><CODE><A HREF="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy">InconsistentTaxonomyException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getParent(int)"><!-- --></A><H3>
getParent</H3>
<PRE>
int <B>getParent</B>(int&nbsp;ordinal)
              throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>getParent() returns the ordinal of the parent category of the category
 with the given ordinal.
 <P>
 When a category is specified as a path name, finding the path of its
 parent is as trivial as dropping the last component of the path.
 getParent() is functionally equivalent to calling getPath() on the
 given ordinal, dropping the last component of the path, and then calling
 getOrdinal() to get an ordinal back. However, implementations are
 expected to provide a much more efficient implementation:
 <P>
 getParent() should be a very quick method, as it is used during the
 facet aggregation process in faceted search. Implementations will most
 likely want to serve replies to this method from a pre-filled cache.
 <P>
 If the given ordinal is the ROOT_ORDINAL, an INVALID_ORDINAL is returned.
 If the given ordinal is a top-level category, the ROOT_ORDINAL is returned.
 If an invalid ordinal is given (negative or beyond the last available
 ordinal), an ArrayIndexOutOfBoundsException is thrown. However, it is
 expected that getParent will only be called for ordinals which are
 already known to be in the taxonomy.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getParentArray()"><!-- --></A><H3>
getParentArray</H3>
<PRE>
int[] <B>getParentArray</B>()
                     throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>getParentArray() returns an int array of size getSize() listing the
 ordinal of the parent category of each category in the taxonomy.
 <P>
 The caller can hold on to the array it got indefinitely - it is
 guaranteed that no-one else will modify it. The other side of the
 same coin is that the caller must treat the array it got as read-only
 and <B>not modify it</B>, because other callers might have gotten the
 same array too (and getParent() calls might be answered from the
 same array).
 <P>
 If you use getParentArray() instead of getParent(), remember that
 the array you got is (naturally) not modified after a refresh(),
 so you should always call getParentArray() again after a refresh().
 <P>
 This method's function is similar to allocating an array of size
 getSize() and filling it with getParent() calls, but implementations
 are encouraged to implement it much more efficiently, with O(1)
 complexity. This can be done, for example, by the implementation
 already keeping the parents in an array, and just returning this
 array (without any allocation or copying) when requested.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getChildrenArrays()"><!-- --></A><H3>
getChildrenArrays</H3>
<PRE>
<A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy">TaxonomyReader.ChildrenArrays</A> <B>getChildrenArrays</B>()</PRE>
<DL>
<DD>getChildrenArrays() returns a <A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><CODE>TaxonomyReader.ChildrenArrays</CODE></A> object which can
 be used together to efficiently enumerate the children of any category. 
 <P>
 The caller can hold on to the object it got indefinitely - it is
 guaranteed that no-one else will modify it. The other side of the
 same coin is that the caller must treat the object which it got (and
 the arrays it contains) as read-only and <B>not modify it</B>, because
 other callers might have gotten the same object too.
 <P>
 Implementations should have O(getSize()) time for the first call or
 after a refresh(), but O(1) time for further calls. In neither case
 there should be a need to read new data from disk. These guarantees
 are most likely achieved by calculating this object (based on the
 getParentArray()) when first needed, and later (if the taxonomy was not
 refreshed) returning the same object (without any allocation or copying)
 when requested.
 <P>
 The reason we have one method returning one object, rather than two
 methods returning two arrays, is to avoid race conditions in a multi-
 threaded application: We want to avoid the possibility of returning one
 new array and one old array, as those could not be used together.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCommitUserData()"><!-- --></A><H3>
getCommitUserData</H3>
<PRE>
<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/util/Map.html" title="class or interface in java.util">Map</A>&lt;<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>,<A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html" title="class or interface in java.lang">String</A>&gt; <B>getCommitUserData</B>()
                                     throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Retrieve user committed data.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE><DT><B>See Also:</B><DD><CODE>TwoPhaseCommit.commit(Map)</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="incRef()"><!-- --></A><H3>
incRef</H3>
<PRE>
void <B>incRef</B>()</PRE>
<DL>
<DD>Expert: increments the refCount of this TaxonomyReader instance. 
 RefCounts can be used to determine when a taxonomy reader can be closed 
 safely, i.e. as soon as there are no more references. 
 Be sure to always call a corresponding decRef(), in a finally clause; 
 otherwise the reader may never be closed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="decRef()"><!-- --></A><H3>
decRef</H3>
<PRE>
void <B>decRef</B>()
            throws <A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></PRE>
<DL>
<DD>Expert: decreases the refCount of this TaxonomyReader instance. 
 If the refCount drops to 0, then pending changes (if any) can be  
 committed to the taxonomy index and this reader can be closed.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html" title="class or interface in java.io">IOException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getRefCount()"><!-- --></A><H3>
getRefCount</H3>
<PRE>
int <B>getRefCount</B>()</PRE>
<DL>
<DD>Expert: returns the current refCount for this taxonomy reader
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSize()"><!-- --></A><H3>
getSize</H3>
<PRE>
int <B>getSize</B>()</PRE>
<DL>
<DD>getSize() returns the number of categories in the taxonomy.
 <P>
 Because categories are numbered consecutively starting with 0, it
 means the taxonomy contains ordinals 0 through getSize()-1.
 <P>
 Note that the number returned by getSize() is often slightly higher
 than the number of categories inserted into the taxonomy; This is
 because when a category is added to the taxonomy, its ancestors
 are also added automatically (including the root, which always get
 ordinal 0).
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/TaxonomyReader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../org/apache/lucene/facet/taxonomy/InconsistentTaxonomyException.html" title="class in org.apache.lucene.facet.taxonomy"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../org/apache/lucene/facet/taxonomy/TaxonomyReader.ChildrenArrays.html" title="interface in org.apache.lucene.facet.taxonomy"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../index.html?org/apache/lucene/facet/taxonomy/TaxonomyReader.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="TaxonomyReader.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

          <script src='../../../../../prettify.js' type='text/javascript'></script>
          <script type='text/javascript'>
            (function(){
              var oldonload = window.onload;
              if (typeof oldonload != 'function') {
                window.onload = prettyPrint;
              } else {
                window.onload = function() {
                  oldonload();
                  prettyPrint();
                }
              }
            })();
          </script>
        
</BODY>
</HTML>
